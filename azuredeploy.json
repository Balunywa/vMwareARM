
{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "virtualMachineName": {
            "defaultValue": "MyDeployedVM",
            "type": "String"
        },
        "vCenterServerResourceId": {
            "defaultValue": "/subscriptions/c8bc39b5-8f1b-4d8e-92e3-35e2a5bb8c31/resourceGroups/Arc-vSphere-Home-vCenter-Server/providers/Microsoft.ConnectedVMwarevSphere/VCenters/Home-DC-01-vCenter-Server",
            "type": "String"
        },
        "customLocationResourceId": {
            "defaultValue": "/subscriptions/c8bc39b5-8f1b-4d8e-92e3-35e2a5bb8c31/resourcegroups/arc-vsphere-home-vcenter-server/providers/microsoft.extendedlocation/customlocations/azure-vcenter-resources",
            "type": "String"
        },
        "templateMoRefId": {
            "defaultValue": "vm-1071",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        {
            "type": "Microsoft.ConnectedVMwarevSphere/virtualMachines",
            "apiVersion": "2022-07-15-preview",
            "name": "[parameters('virtualMachineName')]",
            "location": "eastus",
            "extendedLocation": {
                "type": "CustomLocation",
                "name": "[parameters('customLocationResourceId')]"
            },
            "properties": {
                "vCenterId": "[parameters('vCenterServerResourceId')]",
                "templateId": "[concat(parameters('vCenterServerResourceId'), '/virtualMachineTemplates/WINDOWS-VM-AZURE-ARM')]",
                "resourcePoolId": "[concat(parameters('vCenterServerResourceId'), '/resourcePools/YourResourcePoolId')]", // Replace with actual Resource Pool ID
                "folderPath": "HOME-DC-001/Arc", // Adjust if necessary
                "numCPUs": 2,
                "numCoresPerSocket": 2,
                "memorySizeMB": 4096,
                "osType": "Windows",
                "disks": [
                    {
                        // Disk details here if needed
                    }
                ],
                "networkInterfaces": [
                    {
                        // Network interface details here if needed
                    }
                ],
                "moRefId": "[parameters('templateMoRefId')]"
            }
        }
    ]
}
